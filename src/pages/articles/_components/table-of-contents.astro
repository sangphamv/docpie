---
// Table of Contents component - uses Astro's getHeadings() for optimal performance
import { CONSTANTS } from "@/lib/config";

type Props = {
  headings?: Array<{ depth: number; slug: string; text: string }>;
};

const { headings = [] } = Astro.props;

// Filter to only h2 and h3
const toc = headings.filter((heading) => heading.depth <= 3);
---

<div class="card bg-base-200 shadow-sm mb-6">
  <div class="card-body p-5">
    <h3 class="card-title text-sm uppercase tracking-wider opacity-80">
      {CONSTANTS.Table_Of_Contents}
    </h3>
    {toc.length > 0 ? (
      <nav class="text-sm">
        <ul class="menu menu-compact space-y-1">
          {toc.map((item) => (
            <li>
              <a
                href={`#${item.slug}`}
                class={`text-base-content/70 hover:text-[color:var(--accent)] py-1 transition-colors ${
                  item.depth === 3 ? "pl-6 text-xs" : ""
                }`}
              >
                {item.text}
              </a>
            </li>
          ))}
        </ul>
      </nav>
    ) : (
      <p class="text-sm text-base-content/60">No headings found</p>
    )}
  </div>
</div>