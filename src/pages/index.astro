---
import BaseLayout from "@/layouts/base.astro";
import { getEntry } from "astro:content";
import Headlines from "@/pages/_home/headlines.astro";
import TrendingStories from "@/pages/_home/trendingStories.astro";
import EventAnnouncements from "@/pages/_home/eventAnnouncements.astro";
import CategoryColumns from "@/pages/_home/categoryColumns.astro";
import NewsletterForm from "@/components/bases/newsletter-form.astro";
import Authors from "@/pages/_home/authors.astro";
import ParallaxShowcase from "@/pages/_home/parallaxShowcase.astro";

const entry = await getEntry("views", "home");

if (!entry) {
  return Astro.redirect("/404");
}
---

<BaseLayout entry={entry}>
  <!-- Ghi chú: Trang chủ hiển thị các phần chính gồm:
       - Tin nổi bật (Headlines)
       - Xu hướng (TrendingStories)
       - Tin mới nhất (LatestNews)
       - Thông báo sự kiện (EventAnnouncements)
       - Chuyên mục (CategoryColumns)
       - Bản tin (Newsletter)
       - Tác giả (Authors) -->
  <!-- Featured Stories & Trending Stories -->
  <div class="container py-8">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
      <div class="lg:col-span-8">
        <Headlines />
      </div>
      <div class="lg:col-span-4">
        <TrendingStories />
      </div>
    </div>
  </div>

  <!-- Parallax + Shimmer Showcase -->
  <ParallaxShowcase />

  <!-- Event Announcements -->
  <EventAnnouncements />

  <!-- Category Columns -->
  <CategoryColumns />

  <!-- Newsletter -->
  <section class="py-16 bg-gradient-to-r from-primary to-accent" data-pagefind-ignore="all">
    <div class="container">
      <div class="max-w-2xl mx-auto text-center">
        <p class="text-primary-content/90 text-sm uppercase tracking-wide mb-2">
          BẢN TIN HÀNG NGÀY
        </p>
        <h2 class="text-3xl md:text-4xl font-bold font-serif text-primary-content mb-4">
          Nhận tóm tắt miễn phí những bài viết mới nhất hàng ngày vào hộp thư của bạn.
        </h2>
        <div class="mt-8 flex justify-center">
          <NewsletterForm />
        </div>
        <p class="text-primary-content/80 text-xs mt-4">
          Chúng tôi sẽ không gửi spam. Bạn có thể hủy đăng ký bất cứ lúc nào.
        </p>
      </div>
    </div>
  </section>

  <!-- Authors -->
  <Authors />
</BaseLayout>
